use crate::sse::sse::{process_company, ReqClient, SseQuery};
use std::io::Write;
use std::sync::Arc;
use tokio::sync::Mutex;

mod sse;
static MAX_CONCURRENCY: usize = 4;
static SSE_COMPANIES: &str = "浙江海正生物材料股份有限公司,
桂林光隆科技集团股份有限公司,
烟台德邦科技股份有限公司,
北京谷数科技股份有限公司,
江苏金智教育信息股份有限公司,
中触媒新材料股份有限公司,
亚信安全科技股份有限公司,
成都坤恒顺维科技股份有限公司,
北京理工导航控制科技股份有限公司,
奥比中光科技集团股份有限公司,
阿特斯阳光电力集团股份有限公司,
福建福特科光电股份有限公司,
湖北万润新能源科技股份有限公司,
江苏菲沃泰纳米科技股份有限公司,
深圳市中科蓝讯科技股份有限公司,
江苏隆达超合金股份有限公司,
钜泉光电科技（上海）股份有限公司,
中航（成都）无人机系统股份有限公司,
江苏集萃药康生物科技股份有限公司,
晶科能源股份有限公司,
上海宣泰医药科技股份有限公司,
西安新通药物研究股份有限公司,
广东中图半导体科技股份有限公司,
上海奉天电子股份有限公司,
深圳市路维光电股份有限公司,
上海赛伦生物技术股份有限公司,
北京浩瀚深度信息技术股份有限公司,
广东纬德信息科技股份有限公司,
上海国微思尔芯技术股份有限公司,
大汉软件股份有限公司,
合肥晶合集成电路股份有限公司,
广州创尔生物技术股份有限公司,
征图新视（江苏）科技股份有限公司,
江苏康为世纪生物科技股份有限公司,
敏实集团有限公司,
拓荆科技股份有限公司,
安徽安芯电子科技股份有限公司,
上海合合信息科技股份有限公司,
上海联影医疗科技股份有限公司,
北京吉威空间信息股份有限公司,
陕西莱特光电材料股份有限公司,
北京晶品特装科技股份有限公司,
国网智能科技股份有限公司,
用友汽车信息科技（上海）股份有限公司,
天津美腾科技股份有限公司,
龙腾半导体股份有限公司,
北京经纬恒润科技股份有限公司,
赛恩斯环保股份有限公司,
杭州景业智能科技股份有限公司,
中复神鹰碳纤维股份有限公司,
凌云光技术股份有限公司,
北京英诺特生物技术股份有限公司,
北京九州一轨环境科技股份有限公司,
上海骄成超声波技术股份有限公司,
上海丛麟环保科技股份有限公司,
上海伟测半导体科技股份有限公司,
浙江太美医疗科技股份有限公司,
中微半导体（深圳）股份有限公司,
西安大医集团股份有限公司,
江苏华盛锂电材料股份有限公司,
上海英方软件股份有限公司,
苏州近岸蛋白质科技股份有限公司,
珠海云洲智能科技股份有限公司,
安徽耐科装备科技股份有限公司,
思特威（上海）电子科技股份有限公司,
有研半导体硅材料股份公司,
北京忆恒创源科技股份有限公司,
苏州盛科通信股份有限公司,
河北晶禾电子技术股份有限公司,
哈尔滨国铁科技集团股份有限公司,
大连优迅科技股份有限公司,
北京永信至诚科技股份有限公司,
合肥井松智能科技股份有限公司,
龙芯中科技术股份有限公司,
南京磁谷科技股份有限公司,
上海毕得医药科技股份有限公司,
科捷智能科技股份有限公司,
广东安达智能装备股份有限公司,
诺诚健华医药有限公司,
苏州东微半导体股份有限公司,
中信科移动通信技术股份有限公司,
浙江臻镭科技股份有限公司,
武汉长盈通光电技术股份有限公司,
湖南麒麟信安科技股份有限公司,
荣信汇科电气股份有限公司,
赛特斯信息科技股份有限公司,
迈威（上海）生物科技股份有限公司,
浙江和泽医药科技股份有限公司,
深圳中科飞测科技股份有限公司,
辉芒微电子（深圳）股份有限公司,
上海灿瑞科技股份有限公司,
贵州振华风光半导体股份有限公司,
星环信息科技（上海）股份有限公司,
苏州清越光电科技股份有限公司,
三未信安科技股份有限公司,
苏州浩辰软件股份有限公司,
上海奥浦迈生物科技股份有限公司,
广州极飞科技股份有限公司,
浙江帕瓦新能源股份有限公司,
南京麦澜德医疗科技股份有限公司,
山东天岳先进科技股份有限公司,
广东希荻微电子股份有限公司,
翱捷科技股份有限公司,
南京国博电子股份有限公司,
中钢洛耐科技股份有限公司,
百济神州有限公司,
江苏高凯精密流体技术股份有限公司,
深圳市联软科技股份有限公司,
影石创新科技股份有限公司,
杭州萤石网络股份有限公司,
江苏容汇通用锂业股份有限公司,
江苏帝奥微电子股份有限公司,
北京金橙子科技股份有限公司,
四川百利天恒药业股份有限公司,
苏州德龙激光股份有限公司,
广东赛微微电子股份有限公司,
无锡市好达电子股份有限公司,
广州思林杰科技股份有限公司,
沈阳富创精密设备股份有限公司,
苏州国芯科技股份有限公司,
昱能科技股份有限公司,
广州市品高软件股份有限公司,
广东纳睿雷达科技股份有限公司,
无锡盛景微电子股份有限公司,
华勤技术股份有限公司,
江苏亚虹医药科技股份有限公司,
上海仁度生物科技股份有限公司,
峰岹科技（深圳）股份有限公司,
北京格灵深瞳信息技术股份有限公司,
陕西华秦科技实业股份有限公司,
三一重能股份有限公司,
益方生物科技（上海）股份有限公司,
上海盟科药业股份有限公司,
重庆山外山血液净化技术股份有限公司,
合肥新汇成微电子股份有限公司,
深圳市必易微电子股份有限公司,
广东雅达电子股份有限公司,
成都思科瑞微电子股份有限公司,
海光信息技术股份有限公司,
上海南方模式生物科技股份有限公司,
邦彦技术股份有限公司,
南方电网电力科技股份有限公司,
北京市春立正达医疗器械股份有限公司,
上海概伦电子股份有限公司,
西安炬光科技股份有限公司,
广东德冠薄膜新材料股份有限公司,
深圳英集芯科技股份有限公司,
和元生物技术（上海）股份有限公司,
苏州纳芯微电子股份有限公司,
普源精电科技股份有限公司,
荣昌生物制药（烟台）股份有限公司,
杭州索元生物医药股份有限公司,
宁波菲仕技术股份有限公司,
南京森根科技股份有限公司,
深圳市泛海统联精密制造股份有限公司,
嘉和美康（北京）科技股份有限公司,
上海商米科技集团股份有限公司,
浙江禾川科技股份有限公司,
唯捷创芯（天津）电子技术股份有限公司,
创耀（苏州）通信科技股份有限公司,
杭州禾迈电力电子股份有限公司,
甬矽电子（宁波）股份有限公司,
杭州晶华微电子股份有限公司,
派格生物医药（苏州）股份有限公司,
山东益丰生化环保股份有限公司,
东芯半导体股份有限公司,
迪哲（江苏）医药股份有限公司,
云从科技集团股份有限公司,
恒烁半导体（合肥）股份有限公司,
上海芯导电子科技股份有限公司,
无锡市德科立光电子技术股份有限公司,
上海微创电生理医疗科技股份有限公司,
湖北华强科技股份有限公司,
北京华卓精科科技股份有限公司,
青岛云路先进材料技术股份有限公司,
深圳市鼎阳科技股份有限公司,
深圳市紫光照明技术股份有限公司,
武汉新华扬生物股份有限公司,
盛美半导体设备（上海）股份有限公司,
炬芯科技股份有限公司,
苏州华之杰电讯股份有限公司,
海创药业股份有限公司,
北京盛诺基医药科技股份有限公司,
陕西斯瑞新材料股份有限公司,
杭州安旭生物科技股份有限公司,
上海芯龙半导体技术股份有限公司,
安徽巨一科技股份有限公司,
常州铭赛机器人科技股份有限公司,
国泰新点软件股份有限公司,
南京诺唯赞生物科技股份有限公司,
珠海高凌信息科技股份有限公司,
苏州长光华芯光电技术股份有限公司,
江苏灿勤科技股份有限公司,
上海仁会生物制药股份有限公司,
上海安路信息科技股份有限公司,
先正达集团股份有限公司,
上海澳华内镜股份有限公司,
传神语联网网络科技股份有限公司,
联想集团有限公司,
亚洲硅业（青海）股份有限公司,
苏州晶云药物科技股份有限公司,
旷视科技有限公司,
常州聚和新材料股份有限公司,
深圳云天励飞技术股份有限公司,
深圳天德钰科技股份有限公司,
广东百合医疗科技股份有限公司,
湖北超卓航空科技股份有限公司,
上海翼捷工业安全设备股份有限公司,
上海吉凯基因医学科技股份有限公司,
上海海和药物研究开发股份有限公司,
北京屹唐半导体科技股份有限公司,
美埃（中国）环境科技股份有限公司,
辽宁成大生物股份有限公司,
深圳华大智造科技股份有限公司,
杭州安杰思医学科技股份有限公司,
杭州凯尔达焊接机器人股份有限公司,
珠海冠宇电池股份有限公司,
浙江天地环保科技股份有限公司,
精进电动科技股份有限公司,
北京同益中新材料科技股份有限公司,
北京富吉瑞光电科技股份有限公司,
中天科技海缆股份有限公司,
中科微至智能制造科技江苏股份有限公司,
杭州国泰环保科技股份有限公司,
中自环保科技股份有限公司,
苏州新锐合金工具股份有限公司,
首药控股（北京）股份有限公司,
上海重塑能源集团股份有限公司,
浙江卓锦环保科技股份有限公司,
昆山国力电子科技股份有限公司,
纽威数控装备（苏州）股份有限公司,
杭州博拓生物科技股份有限公司,
浙江博蓝特半导体科技股份有限公司,
上海艾为电子技术股份有限公司,
四川汇宇制药股份有限公司,
株洲中车时代电气股份有限公司,
上海谊众药业股份有限公司,
浙江科惠医疗器械股份有限公司,
江苏宏微科技股份有限公司,
长春百克生物科技股份公司,
广州熵能创新材料股份有限公司,
成都国光电气股份有限公司,
佛山市蓝箭电子股份有限公司,
固安信通信号技术股份有限公司,
上海卓然工程技术股份有限公司,
贵州振华新材料股份有限公司,
浙江衣拿智能科技股份有限公司,
浙江晨泰科技股份有限公司,
格科微有限公司,
赛赫智能设备（上海）股份有限公司,
浙江国祥股份有限公司,
南京茂莱光学科技股份有限公司,
宁波均普智能制造股份有限公司,
湖南长远锂科股份有限公司,
安徽壹石通材料科技股份有限公司,
江西悦安新材料股份有限公司,
北京海天瑞声科技股份有限公司,
普冉半导体（上海）股份有限公司,
远峰科技股份有限公司,
上海复旦微电子集团股份有限公司,
青岛易来智能科技股份有限公司,
广东芳源环保股份有限公司,
广州禾信仪器股份有限公司,
中铁高铁电气装备股份有限公司,
新疆大全新能源股份有限公司,
华海清科股份有限公司,
依图科技有限公司,
厦门厦钨新能源材料股份有限公司,
浙江和达科技股份有限公司,
吉利汽车控股有限公司,
北京乐普诊断科技股份有限公司,
青岛中科英泰商用系统股份有限公司,
安徽容知日新科技股份有限公司,
深圳市倍轻松科技股份有限公司,
中钢集团马鞍山矿山研究总院股份有限公司,
科德数控股份有限公司,
瑞能半导体科技股份有限公司,
青岛达能环保设备股份有限公司,
上海唯赛勃环保科技股份有限公司,
苏州瑞可达连接系统股份有限公司,
湖南华纳大药厂股份有限公司,
上海华依科技集团股份有限公司,
四川天微电子股份有限公司,
杭州宏华数码科技股份有限公司,
江苏金迪克生物技术股份有限公司,
山东威高骨科材料股份有限公司,
武汉中科通达高新技术股份有限公司,
正元地理信息集团股份有限公司,
贵州航宇科技发展股份有限公司,
广东利元亨智能装备股份有限公司,
合肥工大高科信息科技股份有限公司,
山东英科环保再生资源股份有限公司,
旭宇光电（深圳）股份有限公司,
金冠电气股份有限公司,
长威信息科技发展股份有限公司,
苏州瑞博生物技术股份有限公司,
北京阳光诺和药物研究股份有限公司,
气派科技股份有限公司,
中国铁建重工集团股份有限公司,
威腾电气集团股份有限公司,
浙江日风电气股份有限公司,
北京煜邦电力技术股份有限公司,
昆山东威科技股份有限公司,
唐山百川智能机器股份有限公司,
中国科学院沈阳科学仪器股份有限公司,
苏州纳微科技股份有限公司,
成都欧林生物科技股份有限公司,
爱威科技股份有限公司,
山东科汇电力自动化股份有限公司,
上海皓元医药股份有限公司,
无锡力芯微电子股份有限公司,
呈和科技股份有限公司,
西安凯立新材料股份有限公司,
上海冠龙阀门节能设备股份有限公司,
成都圣诺生物科技股份有限公司,
深圳市核达中远通电源技术股份有限公司,
苏州快可光伏电子股份有限公司,
上海奥普生物医药股份有限公司,
武汉珈创生物技术股份有限公司,
广东博力威科技股份有限公司,
上海和辉光电股份有限公司,
上海电气风电集团股份有限公司,
西安康拓医疗技术股份有限公司,
深圳微众信用科技股份有限公司,
江苏诺泰澳赛诺生物制药股份有限公司,
广州三孚新材料科技股份有限公司,
奥精医疗科技股份有限公司,
江苏迈信林航空科技股份有限公司,
浙江海盐力源环保科技股份有限公司,
上海睿昂基因科技股份有限公司,
博众精工科技股份有限公司,
北京中数智汇科技股份有限公司,
广东芬尼科技股份有限公司,
宁波环洋新材料股份有限公司,
苏州明志科技股份有限公司,
京东数字科技控股股份有限公司,
深圳新益昌科技股份有限公司,
深圳市正弦电气股份有限公司,
深圳市迅捷兴科技股份有限公司,
北京天广实生物技术股份有限公司,
吉林省中研高分子材料股份有限公司,
广州广合科技股份有限公司,
北京信安世纪科技股份有限公司,
安徽华恒生物科技股份有限公司,
上海霍莱沃电子系统技术股份有限公司,
深圳市亚辉龙生物科技股份有限公司,
深圳瑞华泰薄膜科技股份有限公司,
江苏联测机电科技股份有限公司,
福建汇川物联网技术科技股份有限公司,
上海康鹏科技股份有限公司,
成都智明达电子股份有限公司,
苏州上声电子股份有限公司,
森泰英格（成都）数控刀具股份有限公司,
浙江齐治科技股份有限公司,
佛山市联动科技股份有限公司,
上海禾赛科技股份有限公司,
北京诺禾致源科技股份有限公司,
新风光电子科技股份有限公司,
广东莱尔新材料科技股份有限公司,
杭州柯林电气股份有限公司,
苏州昀冢电子科技股份有限公司,
智洋创新科技股份有限公司,
南通星球石墨股份有限公司,
苏州和林微纳科技股份有限公司,
慧翰微电子股份有限公司,
朝阳微电子科技股份有限公司,
广东九联科技股份有限公司,
无锡市尚沃医疗电子股份有限公司,
浙江开创环保科技股份有限公司,
河南翔宇医疗设备股份有限公司,
广东富信科技股份有限公司,
安徽元琛环保科技股份有限公司,
科美诊断技术股份有限公司,
腾景科技股份有限公司,
合肥芯碁微电子装备股份有限公司,
上海蓝科石化环保科技股份有限公司,
德威华泰科技股份有限公司,
江苏国光信息产业股份有限公司,
安徽森泰木塑集团股份有限公司,
杭州品茗安控信息技术股份有限公司,
紫泉能源技术股份有限公司,
杭州百子尖科技股份有限公司,
博创智能装备股份有限公司,
北京青云科技股份有限公司,
杭州奥泰生物技术股份有限公司,
杭州西力智能科技股份有限公司,
云知声智能科技股份有限公司,
深圳市柔宇科技股份有限公司,
武汉菱电汽车电控系统股份有限公司,
苏州艾隆科技股份有限公司,
深圳市深科达智能装备股份有限公司,
广州中望龙腾软件股份有限公司,
有研粉末新材料股份有限公司,
成都极米科技股份有限公司,
海南金盘智能科技股份有限公司,
杭州美迪凯光电科技股份有限公司,
杭州爱科科技股份有限公司,
龙迅半导体（合肥）股份有限公司,
锐芯微电子股份有限公司,
浙江光华科技股份有限公司,
丹娜（天津）生物科技股份有限公司,
洛阳中超新材料股份有限公司,
北京中科晶上科技股份有限公司,
罗普特科技集团股份有限公司,
广东鸿铭智能股份有限公司,
包头天和磁材科技股份有限公司,
成都纵横自动化技术股份有限公司,
株洲华锐精密工具股份有限公司,
青岛海泰新光科技股份有限公司,
上海拓璞数控科技股份有限公司,
天士力生物医药股份有限公司,
北京凯因科技股份有限公司,
生益电子股份有限公司,
四方光电股份有限公司,
北京芯愿景软件技术股份有限公司,
苏州康代智能科技股份有限公司,
江苏康众数字医疗科技股份有限公司,
优利德科技（中国）股份有限公司,
山西锦波生物医药股份有限公司,
江苏正济药业股份有限公司,
昆腾微电子股份有限公司,
江苏富淼科技股份有限公司,
广东聚石化学股份有限公司,
常州银河世纪微电子股份有限公司,
成都新朝阳作物科学股份有限公司,
云南北方奥雷德光电科技股份有限公司,
天能电池集团股份有限公司,
上海健耕医药科技股份有限公司,
江苏浩欧博生物医药股份有限公司,
上海海优威新材料股份有限公司,
江苏微导纳米科技股份有限公司,
上海泽生科技开发股份有限公司,
深圳惠泰医疗器械股份有限公司,
上海之江生物科技股份有限公司,
广东奥普特科技股份有限公司,
上海合晶硅材料股份有限公司,
赛克赛斯生物科技股份有限公司,
艾索信息股份有限公司,
泰州亿腾景昂药业股份有限公司,
青岛中加特电气股份有限公司,
福立旺精密机电（中国）股份有限公司,
深圳市三旺通信股份有限公司,
上海派能能源科技股份有限公司,
苏州伟创电气科技股份有限公司,
东软医疗系统股份有限公司,
长沙兴嘉生物工程股份有限公司,
安徽省通源环境节能股份有限公司,
悦康药业集团股份有限公司,
明冠新材料股份有限公司,
无锡航亚科技股份有限公司,
深圳市明微电子股份有限公司,
东莞市鼎通精密科技股份有限公司,
深圳汉弘数字印刷集团股份有限公司,
株洲欧科亿数控精密刀具股份有限公司,
科兴生物制药股份有限公司,
恒玄科技（上海）股份有限公司,
江苏柯菲平医药股份有限公司,
上海艾力斯医药科技股份有限公司,
杭华油墨股份有限公司,
上海新致软件股份有限公司,
宁波天益医疗器械股份有限公司,
广州市溢信科技股份有限公司,
兰剑智能科技股份有限公司,
深圳市创鑫激光股份有限公司,
蚂蚁科技集团股份有限公司,
河南秋乐种业科技股份有限公司,
北京天科合达半导体股份有限公司,
上海步科自动化股份有限公司,
浙江中控技术股份有限公司,
江西金达莱环保股份有限公司,
广东利扬芯片测试股份有限公司,
大连豪森设备制造股份有限公司,
深圳市万佳安物联科技股份有限公司,
国网智能科技股份有限公司,
会通新材料股份有限公司,
上海博科资讯股份有限公司,
前沿生物药业（南京）股份有限公司,
九号有限公司,
山东泰丰智能控制股份有限公司,
上海泰坦科技股份有限公司,
深圳市科思科技股份有限公司,
传神语联网网络科技股份有限公司,
上海宏力达信息技术股份有限公司,
上海阿拉丁生化科技股份有限公司,
东来涂料技术（上海）股份有限公司,
天臣国际医疗科技股份有限公司,
江苏泛亚微透科技股份有限公司,
苏州世华新材料科技股份有限公司,
上纬新材料科技股份有限公司,
精英数智科技股份有限公司,
桂林智神信息技术股份有限公司,
路德环境科技股份有限公司,
武汉科前生物股份有限公司,
浙江蓝特光学股份有限公司,
芯海科技（深圳）股份有限公司,
赛赫智能设备（上海）股份有限公司,
上海奕瑞光电子科技股份有限公司,
思瑞浦微电子科技（苏州）股份有限公司,
福建福昕软件开发股份有限公司,
合肥科威尔电源系统股份有限公司,
慧捷（上海）科技股份有限公司,
西安瑞联新材料股份有限公司,
吉林奥来德光电材料股份有限公司,
浙江海德曼智能装备股份有限公司,
江苏固德威电源科技股份有限公司,
北京莱伯泰科仪器股份有限公司,
深圳市海目星激光智能装备股份有限公司,
苏州绿的谐波传动科技股份有限公司,
圣湘生物科技股份有限公司,
成都苑东生物制药股份有限公司,
北京铁科首钢轨道技术股份有限公司,
北京键凯科技股份有限公司,
上海正帆科技股份有限公司,
江苏中信博新能源科技股份有限公司,
浙江瑞晟智能科技股份有限公司,
杭州华光焊接新材料股份有限公司,
芯原微电子（上海）股份有限公司,
郑州信大捷安信息技术股份有限公司,
广州安必平医药科技股份有限公司,
上海复洁环保科技股份有限公司,
昆山龙腾光电股份有限公司,
北京博睿宏远数据科技股份有限公司,
苏州敏芯微电子技术股份有限公司,
北京亿华通科技股份有限公司,
上海先惠自动化技术股份有限公司,
上海凯赛生物技术股份有限公司,
康希诺生物股份公司,
南亚新材料科技股份有限公司,
河南仕佳光子科技股份有限公司,
成都盟升电子技术股份有限公司,
青岛高测科技股份有限公司,
北京赛科希德科技股份有限公司,
奇安信科技集团股份有限公司,
合肥江航飞机装备股份有限公司,
爱博诺德（北京）医疗科技股份有限公司,
贵州白山云科技股份有限公司,
无锡德林海环保科技股份有限公司,
深圳市力合微电子股份有限公司,
安徽大地熊新材料股份有限公司,
中芯国际集成电路制造有限公司,
无锡芯朋微电子股份有限公司,
三生国健药业（上海）股份有限公司,
南京伟思医疗科技股份有限公司,
中科寒武纪科技股份有限公司,
江苏艾迪药业股份有限公司,
北京慧辰资道资讯股份有限公司,
济南恒誉环保科技股份有限公司,
深圳震有科技股份有限公司,
埃夫特智能装备股份有限公司,
山大地纬软件股份有限公司,
中科星图股份有限公司,
江苏云涌电子科技股份有限公司,
微创（上海）网络技术股份有限公司,
南京迪威尔高端制造股份有限公司,
科大国盾量子技术股份有限公司,
北京天智航医疗科技股份有限公司,
安徽皖仪科技股份有限公司,
广东晶科电子股份有限公司,
成都秦川物联网科技股份有限公司,
南通国盛智能科技集团股份有限公司,
深圳宜搜天下科技股份有限公司,
苏州金宏气体股份有限公司,
泽达易盛（天津）科技股份有限公司,
上海君实生物医药科技股份有限公司,
孚能科技（赣州）股份有限公司,
威海市天罡仪表股份有限公司,
北京神州细胞生物技术集团股份公司,
河南科隆新能源股份有限公司,
深圳市联赢激光股份有限公司,
北京市博汇科技股份有限公司,
上海复旦张江生物医药股份有限公司,
深圳市燕麦科技股份有限公司,
湖南松井新材料股份有限公司,
天合光能股份有限公司,
傲基科技股份有限公司,
博众精工科技股份有限公司,
浙江德马科技股份有限公司,
湖南金博碳素股份有限公司,
无锡奥特维科技股份有限公司,
苏州工业园区凌志软件股份有限公司,
江苏吉贝尔药业股份有限公司,
金科环境股份有限公司,
杭州光云科技股份有限公司,
深圳市财富趋势科技股份有限公司,
成都先导药物开发股份有限公司,
上海硅产业集团股份有限公司,
上海三友医疗器械股份有限公司,
江苏京源环保股份有限公司,
开普云信息科技股份有限公司,
湖南南新制药股份有限公司,
罗克佳华科技集团股份有限公司,
广州宏晟光电科技股份有限公司,
广州禾信仪器股份有限公司,
广东紫晶信息存储技术股份有限公司,
华润微电子有限公司,
北京石头世纪科技股份有限公司,
百奥泰生物制药股份有限公司,
锦州神工半导体股份有限公司,
北京华峰测控技术股份有限公司,
深圳市道通科技股份有限公司,
广州瑞松智能科技股份有限公司,
北京映翰通网络技术股份有限公司,
福建赛特新材股份有限公司,
张家港广大特材股份有限公司,
深圳市有方科技股份有限公司,
苏州泽璟生物制药股份有限公司,
浙江东方基因生物制品股份有限公司,
优刻得科技股份有限公司,
广州洁特生物过滤股份有限公司,
威胜信息技术股份有限公司,
厦门特宝生物工程股份有限公司,
南京万德斯环保科技股份有限公司,
绍兴兴欣新材料股份有限公司,
北京八亿时空液晶科技股份有限公司,
武汉兴图新科电子股份有限公司,
上海拓璞数控科技股份有限公司,
北京龙软科技股份有限公司,
广东华特气体股份有限公司,
江苏浩欧博生物医药股份有限公司,
聚辰半导体股份有限公司,
嘉必优生物技术（武汉）股份有限公司,
安翰科技（武汉）股份有限公司,
江西金达莱环保股份有限公司,
杭州当虹科技股份有限公司,
沈阳芯源微电子设备股份有限公司,
广州佛朗斯股份有限公司,
博拉网络股份有限公司,
江苏卓易信息科技股份有限公司,
先临三维科技股份有限公司,
上海赛伦生物技术股份有限公司,
江苏北人机器人系统股份有限公司,
北京佰仁医疗科技股份有限公司,
江苏硕世生物科技股份有限公司,
普元信息技术股份有限公司,
中联云港数据科技股份有限公司,
洛阳建龙微纳新材料股份有限公司,
迈得医疗工业设备股份有限公司,
无锡祥生医疗科技股份有限公司,
深圳清溢光电股份有限公司,
北京金山办公软件股份有限公司,
二十一世纪空间技术应用股份有限公司,
华夏天信智能物联股份有限公司,
广东利元亨智能装备股份有限公司,
三达膜环境技术股份有限公司,
江苏联瑞新材料股份有限公司,
深圳普门科技股份有限公司,
杭州鸿泉物联网技术股份有限公司,
杭州安恒信息技术股份有限公司,
龙岩卓越新能源股份有限公司,
中国电器科学研究院股份有限公司,
天津久日新材料股份有限公司,
博瑞生物医药（苏州）股份有限公司,
山东奥福环保科技股份有限公司,
宁波长阳科技股份有限公司,
上海美迪西生物医药股份有限公司,
上海昊海生物科技股份有限公司,
北京致远互联软件股份有限公司,
北京宝兰德软件股份有限公司,
深圳市杰普特光电股份有限公司,
华熙生物科技股份有限公司,
赛诺医疗科学技术股份有限公司,
上海泰坦科技股份有限公司,
申联生物医药（上海）股份有限公司,
青岛海尔生物医疗股份有限公司,
光通天下网络科技股份有限公司,
北京连山科技股份有限公司,
上海晶丰明源半导体股份有限公司,
深圳传音控股股份有限公司,
北京国科环宇科技股份有限公司,
北京热景生物技术股份有限公司,
山石网科通信技术股份有限公司,
恒安嘉新（北京）科技股份公司,
江苏天奈科技股份有限公司,
视联动力信息技术股份有限公司,
成都苑东生物制药股份有限公司,
上海新数网络科技股份有限公司,
北京安博通科技股份有限公司,
深圳市贝斯达医疗股份有限公司,
北京海天瑞声科技股份有限公司,
北京诺康达医药科技股份有限公司,
和舰芯片制造（苏州）股份有限公司,
深圳微芯生物科技股份有限公司,
晶晨半导体（上海）股份有限公司,
上海柏楚电子科技股份有限公司,
北京木瓜移动科技股份有限公司,
交控科技股份有限公司,
北京航天宏图信息技术股份有限公司,
广东嘉元科技股份有限公司,
北京沃尔德金刚石工具股份有限公司,
广州方邦电子股份有限公司,
北京天宜上佳高新材料股份有限公司,
苏州瀚川智能科技股份有限公司,
虹软科技股份有限公司,
南京微创医学科技股份有限公司,
上海微创心脉医疗科技股份有限公司,
宁波容百新能源科技股份有限公司,
哈尔滨新光光电科技股份有限公司,
西部超导材料科技股份有限公司,
福建福光股份有限公司,
安集微电子科技（上海）股份有限公司,
中微半导体设备（上海）股份有限公司,
西安铂力特增材技术股份有限公司,
乐鑫信息科技（上海）股份有限公司,
深圳光峰科技股份有限公司,
中国铁路通信信号股份有限公司,
澜起科技股份有限公司,
浙江杭可科技股份有限公司,
苏州天准科技股份有限公司,
苏州华兴源创科技股份有限公司,
烟台睿创微纳技术股份有限公司";

#[tokio::main]
async fn main() {
    let companies: Vec<_> = SSE_COMPANIES
        .split_terminator(',')
        .map(|x| x.trim())
        .collect();

    let mut sse = Arc::new(Mutex::new(SseQuery::new()));
    let idx: Vec<usize> = (0..100).collect();
    let companies_ptr = companies.as_ptr();
    for chunk in idx.chunks(MAX_CONCURRENCY) {
        let mut handles = Vec::with_capacity(MAX_CONCURRENCY);
        for &elem in chunk.iter() {
            let sse_copy = sse.clone();
            let company_copy = companies[elem];
            handles.push(tokio::spawn(async move {
                println!("processing {}", company_copy);
                let mut client = ReqClient::new();
                let ret = process_company(&mut client, company_copy).await;
                let mut copy = sse_copy.lock().await;
                copy.add(ret);
            }));
        }
        for handle in handles {
            handle.await;
        }
    }
    let mut file = std::fs::File::create("failed_logs.txt").unwrap();
    let sse_result = sse.lock().await;
    let content = sse_result.failed_logs.join("\n");
    file.write_all(content.as_ref());
}
